const fullQuestionsList = [
    {
        letter: "a",
        questions: [
            {
                answer: "abducir",
                status: 0,
                question:
                    "CON LA A. Dicho de una supuesta criatura extraterrestre: Apoderarse de alguien",
            },
            {
                answer: "arteria",
                status: 0,
                question:
                    "CON LA A. Conducto por donde va la sangre desde el corazón a las demás partes del cuerpo.",
            },
            {
                answer: "abecedario",
                status: 0,
                question:
                    "CON LA A. Conjunto de letras de un idioma  puestas en orden.",
            },
        ],
    },

    {
        letter: "b",
        questions: [
            {
                answer: "bingo",
                status: 0,
                question:
                    "CON LA B. Juego que ha sacado de quicio a todos los 'Skylabers' en las sesiones de precurso",
            },
            {
                answer: "bitacora",
                status: 0,
                question:
                    "CON LA B. En los barcos, especie de armario que está fijo en la cubierta y situado muy cerca del timón donde se pone la brújula.",
            },
            {
                answer: "babero",
                status: 0,
                question:
                    "CON LA B. Tela que se pone a los bebes en el pecho para que no se manchen al comer.",
            },
        ],
    },

    {
        letter: "c",
        questions: [
            {
                answer: "churumbel",
                status: 0,
                question: "CON LA C. Niño, crío, bebé",
            },
            {
                answer: "ciceron",
                status: 0,
                question:
                    "CON LA C. Persona que sirve a otras de guía y les va enseñando y explicando lugares y cosas interesantes.",
            },
            {
                answer: "cabeza",
                status: 0,
                question:
                    "CON LA C. Parte superior del cuerpo que esta sobre el cuello.",
            },
        ],
    },

    {
        letter: "d",
        questions: [
            {
                answer: "diarrea",
                status: 0,
                question:
                    "CON LA D. Anormalidad en la función del aparato digestivo caracterizada por frecuentes evacuaciones y su consistencia líquida",
            },
            {
                answer: "diplomacia",
                status: 0,
                question:
                    "CON LA D. Actividad que realiza un país para mantener buenas relaciones con el resto de países. ",
            },
            {
                answer: "dormir",
                status: 0,
                question:
                    "CON LA D. Forma de descanso que hacemos por las noches o en las siestas.",
            },
        ],
    },

    {
        letter: "e",
        questions: [
            {
                answer: "ectoplasma",
                status: 0,
                question:
                    "CON LA E. Gelatinoso y se encuentra debajo de la membrana plasmática. Los cazafantasmas medían su radiación",
            },
            {
                answer: "efimero",
                status: 0,
                question: "CON LA E. Pasajero, de corta duración",
            },
            {
                answer: "equinoccio",
                status: 0,
                question:
                    "CON LA E. Cada uno de los dos momentos del año en que, por estar el Sol sobre el ecuador, los días y las noches duran lo mismo en toda la Tierra. ",
            },
        ],
    },

    {
        letter: "f",
        questions: [
            {
                answer: "facil",
                status: 0,
                question:
                    "CON LA F. Que no requiere gran esfuerzo, capacidad o dificultad",
            },
            {
                answer: "fisiologia",
                status: 0,
                question:
                    "CON LA F. Ciencia que estudia las funciones de los órganos de los seres vivos.",
            },
            {
                answer: "faja",
                status: 0,
                question:
                    "CON LA F. Prenda interior elástica que ciñe la cintura, o la cintura y las caderas",
            },
        ],
    },

    {
        letter: "g",
        questions: [
            {
                answer: "galaxia",
                status: 0,
                question:
                    "CON LA G. Conjunto enorme de estrellas, polvo interestelar, gases y partículas",
            },
            {
                answer: "gominola",
                status: 0,
                question:
                    "CON LA G. Golosina blanca masticable, generalmente recubierta de azúcar ",
            },
            {
                answer: "glaciacion",
                status: 0,
                question:
                    "CON LA G. Cada una de las épocas, hace miles de años, en las que hacía mucho más frío que en la actualidad y gran parte de la Tierra estaba cubierta por hielo.",
            },
        ],
    },

    {
        letter: "h",
        questions: [
            {
                answer: "harakiri",
                status: 0,
                question:
                    "CON LA H. Suicidio ritual japonés por desentrañamiento",
            },
            {
                answer: "hinojo",
                status: 0,
                question:
                    "CON LA H. Planta de flores amarillas que se usa como condimento, por el sabor de sus frutos parecido al del anís, y también en medicina porque ayuda a hacer la digestión.",
            },
            {
                answer: "historia",
                status: 0,
                question:
                    "CON LA H. Conjunto de todos los hechos ocurridos en tiempos pasados ",
            },
        ],
    },

    {
        letter: "i",
        questions: [
            {
                answer: "iglesia",
                status: 0,
                question: "CON LA I. Templo cristiano",
            },
            {
                answer: "ilves",
                status: 0,
                question:
                    "CON LA I. Apellido del político que fue presidente de Estonia entre los años 2006 y 2016",
            },
            {
                answer: "ingenio",
                status: 0,
                question:
                    "CON LA I. Capacidad para inventar cosas o para pensar y hablar con gracia.",
            },
        ],
    },

    {
        letter: "j",
        questions: [
            {
                answer: "jabali",
                status: 0,
                question:
                    "CON LA J. Variedad salvaje del cerdo que sale en la película 'El Rey León', de nombre Pumba.",
            },
            {
                answer: "judion",
                status: 0,
                question:
                    "CON LA J. Variedad de judía de vainas anchas y semilla grande.",
            },
            {
                answer: "jade",
                status: 0,
                question:
                    "CON LA J. Mineral muy duro, de color verde o blanquecino, que se emplea en joyería y para hacer objetos de adorno.",
            },
        ],
    },

    {
        letter: "k",
        questions: [
            {
                answer: "kamikaze",
                status: 0,
                question:
                    "CON LA K. Persona que se juega la vida realizando una acción temeraria",
            },
            {
                answer: "karaoke",
                status: 0,
                question:
                    "CON LA K. Diversión consistente en interpretar una canción grabada, mientras se sigue la letra que aparece en una pantalla.",
            },
            {
                answer: "kiwi",
                status: 0,
                question: "CON LA K. Fruta de color de verde y piel aspera",
            },
        ],
    },

    {
        letter: "l",
        questions: [
            {
                answer: "licantropo",
                status: 0,
                question: "CON LA L. Hombre lobo",
            },
            {
                answer: "linaje",
                status: 0,
                question:
                    "CON LA L. Ascendencia o descendencia de una familia, especialmente noble",
            },
            {
                answer: "lema",
                status: 0,
                question:
                    "CON LA L. Frase que expresa la forma en que debe actuar una persona.",
            },
        ],
    },

    {
        letter: "m",
        questions: [
            {
                answer: "misantropo",
                status: 0,
                question:
                    "CON LA M. Persona que huye del trato con otras personas o siente gran aversión hacia ellas",
            },
            {
                answer: "miriñaque",
                status: 0,
                question:
                    "CON LA M. Prenda rígida o almidonada, a veces con aros, que antiguamente llevaban las mujeres bajo la falda para darle vuelo.",
            },
            {
                answer: "madriguera",
                status: 0,
                question:
                    "CON LA M. Cueva en la que habitan ciertos animales, especialmente los conejos",
            },
        ],
    },

    {
        letter: "n",
        questions: [
            {
                answer: "necedad",
                status: 0,
                question: "CON LA N. Demostración de poca inteligencia",
            },
            {
                answer: "navato",
                status: 0,
                question: "CON LA N. Espinazo de los vertebrados",
            },
            {
                answer: "ninfa",
                status: 0,
                question:
                    "CON LA N. En las leyendas mitológicas, diosa con forma de muchacha que vivía en los bosques, las fuentes o los ríos.",
            },
        ],
    },

    {
        letter: "ñ",
        questions: [
            {
                answer: "señal",
                status: 0,
                question:
                    "CONTIENE LA Ñ. Indicio que permite deducir algo de lo que no se tiene un conocimiento directo.",
            },
            {
                answer: "ñandu",
                status: 0,
                question:
                    "CON LA Ñ. Ave parecida al avestruz, pero más pequeña y con tres dedos en cada pie.",
            },
            {
                answer: "acuñar",
                status: 0,
                question: "CON LA Ñ. Hacer o fabricar moneda ",
            },
        ],
    },

    {
        letter: "o",
        questions: [
            {
                answer: "orco",
                status: 0,
                question:
                    "CON LA O. Humanoide fantástico de apariencia terrible y bestial, piel de color verde creada por el escritor Tolkien",
            },
            {
                answer: "onirico",
                status: 0,
                question: "CON LA O. Perteneciente o relativo a los sueños",
            },
            {
                answer: "onomatopeya",
                status: 0,
                question:
                    "CON LA O. Palabra que imita el sonido que hace un animal o una cosa.",
            },
        ],
    },

    {
        letter: "p",
        questions: [
            {
                answer: "protoss",
                status: 0,
                question:
                    "CON LA P. Raza ancestral tecnológicamente avanzada que se caracteriza por sus grandes poderes psíonicos del videojuego StarCraft",
            },
            {
                answer: "piolet",
                status: 0,
                question:
                    "CON LA P. Instrumento con forma de pico que utilizan los alpinistas para asegurar sus movimientos sobre la nieve o el hielo",
            },
            {
                answer: "pabellon",
                status: 0,
                question:
                    "CON LA P. Edificio que es parte de un conjunto, de otro edificio más grande, o que está muy cerca de él.",
            },
        ],
    },

    {
        letter: "q",
        questions: [
            {
                answer: "queso",
                status: 0,
                question:
                    "CON LA Q. Producto obtenido por la maduración de la cuajada de la leche",
            },
            {
                answer: "quimera",
                status: 0,
                question:
                    "CON LA Q. Cosa que, sin ser real, alguien la imagina como posible o verdadera.",
            },
            {
                answer: "equilatero",
                status: 0,
                question:
                    "CONTIENE LA Q. Triángulo que tiene todos sus lados iguales ",
            },
        ],
    },

    {
        letter: "r",
        questions: [
            { answer: "raton", status: 0, question: "CON LA R. Roedor" },
            {
                answer: "risaralda",
                status: 0,
                question:
                    "CON LA R. Departamento de Colombia con capital en la ciudad de Pereira",
            },
            {
                answer: "remora",
                status: 0,
                question:
                    "CON LA R. Pez marino que tiene una especie de ventosa en la cabeza con la que se fija a otros peces más grandes",
            },
        ],
    },

    {
        letter: "s",
        questions: [
            {
                answer: "stackoverflow",
                status: 0,
                question:
                    "CON LA S. Comunidad salvadora de todo desarrollador informático",
            },
            {
                answer: "sentar",
                status: 0,
                question:
                    "CON LA S. Poner o colocar a alguien en una silla o banco, de manera que quede apoyado y descansando sobre los gluteos",
            },
            {
                answer: "sotana",
                status: 0,
                question:
                    "CON LA S. Traje negro y largo parecido a una túnica que llevan algunos curas y religiosos",
            },
        ],
    },

    {
        letter: "t",
        questions: [
            {
                answer: "terminator",
                status: 0,
                question:
                    "CON LA T. Película del director James Cameron que consolidó a Arnold Schwarzenegger como actor en 1984",
            },
            {
                answer: "tipi",
                status: 0,
                question:
                    "CON LA T. Tienda de piel de forma cónica que utilizaban como vivienda los indios de las praderas de América del Norte",
            },
            {
                answer: "testamento",
                status: 0,
                question:
                    "CON LA T. Escrito o declaración de palabra en el que alguien dice lo que quiere que se haga después de su muerte, sobre todo con su dinero o sus pertenencias.",
            },
        ],
    },

    {
        letter: "u",
        questions: [
            {
                answer: "unamuno",
                status: 0,
                question:
                    "CON LA U. Escritor y filósofo español de la generación del 98 autor del libro 'Niebla' en 1914",
            },
            {
                answer: "urbanizacion",
                status: 0,
                question:
                    "CON LA S. Conjunto de casas y edificios que suelen ser parecidos y donde hay tiendas, parques y otros espacios que necesitan las personas que allí viven.",
            },
            {
                answer: "unilateral",
                status: 0,
                question:
                    "CON LA S. Que se refiere o se circunscribe solamente a una parte o a un aspecto de algo",
            },
        ],
    },

    {
        letter: "v",
        questions: [
            {
                answer: "vikingos",
                status: 0,
                question:
                    "CON LA V. Nombre dado a los miembros de los pueblos nórdicos originarios de Escandinavia, famosos por sus incursiones y pillajes en Europa",
            },
            {
                answer: "vilano",
                status: 0,
                question: "CON LA V. Flor del cardo",
            },
            {
                answer: "vencejo",
                status: 0,
                question:
                    "CON LA V. Pájaro de color casi siempre negro o pardo que tiene el pico delgado, las alas muy largas y la cola en forma de horquilla. Vuela muy rápido.",
            },
        ],
    },

    {
        letter: "w",
        questions: [
            {
                answer: "sandwich",
                status: 0,
                question:
                    "CONTIENE LA W. Emparedado hecho con dos rebanadas de pan entre las cuales se coloca jamón y queso",
            },
            {
                answer: "wifi",
                status: 0,
                question:
                    "CON LA W. Sistema de conexión inalámbrica para conectarse a internet.",
            },
            {
                answer: "whisky",
                status: 0,
                question:
                    "CON LA W. Licor con mucho alcohol que se hace al fermentar la cebada o algunos otros cereales.",
            },
        ],
    },

    {
        letter: "x",
        questions: [
            {
                answer: "botox",
                status: 0,
                question:
                    "CONTIENE LA X. Toxina bacteriana utilizada en cirujía estética",
            },
            {
                answer: "xilografia",
                status: 0,
                question:
                    "CON LA X. Manera de hacer grabados sobre madera, dejando vacías las partes que deben quedar blancas en el dibujo.",
            },
            {
                answer: "dux",
                status: 0,
                question:
                    "CON LA X. En las repúblicas de Venecia o Génova, príncipe o magistrado supremo.",
            },
        ],
    },

    {
        letter: "y",
        questions: [
            {
                answer: "peyote",
                status: 0,
                question:
                    "CONTIENE LA Y. Pequeño cáctus conocido por sus alcaloides psicoactivos utilizado de forma ritual y medicinal por indígenas americanos",
            },
            {
                answer: "ensayar",
                status: 0,
                question:
                    "CONTIENE LA Y. Preparar el montaje y ejecución de un espectáculo antes de ofrecerlo al público",
            },
            {
                answer: "yak",
                status: 0,
                question:
                    "CON LA Y. Mamífero de gran tamaño parecido a un toro, pero con el cuero cubierto de un abundante pelo que lo protege del frío.",
            },
        ],
    },

    {
        letter: "z",
        questions: [
            {
                answer: "zen",
                status: 0,
                question:
                    "CON LA Z. Escuela de budismo que busca la experiencia de la sabiduría más allá del discurso racional",
            },
            {
                answer: "zumbado",
                status: 0,
                question: "CON LA Z. Participio del verbo zumbar",
            },
            {
                answer: "zocalo",
                status: 0,
                question:
                    "CON LA Z. 	Banda más o menos ancha, cubierta de otro material o pintada, que hay en la parte baja de las paredes de una habitación.",
            },
        ],
    },
];

class Pasapalabra {
    constructor(inputTextIsUserAnswer, gameQuestionsList) {
        this.inputTextIsUserAnswer = inputTextIsUserAnswer;
        this.gameQuestionsList = gameQuestionsList;
        this.index = 0;
        this.correct = 0;
        this.incorrect = 0;
    }

    createGameQuestionsList() {
        return fullQuestionsList.map((question) => {
            let questionIndex = Math.floor(Math.random() * 3);

            return {
                letter: question.letter,
                status: question.questions[questionIndex].status,
                answer: question.questions[questionIndex].answer,
                question: question.questions[questionIndex].question,
            };
        });
    }

    saveAnswer(inputText) {
        this.currentAnswer = inputText;
    }

    colorizeLetters(color) {
        let letterHTML = document.querySelector(`#letter__${this.index}`);

        if (color === "green") {
            letterHTML.style.backgroundColor = "green";
        } else if (color === "red") {
            letterHTML.style.backgroundColor = "red";
        }
    }

    showNextQuestion() {
        if (this.index === gameQuestionsList.length - 1) {
            this.index = 0;
        } else {
            this.index++;
        }

        this.showQuestion();
    }

    showQuestion() {
        if (gameQuestionsList.some((question) => question.status === 0)) {
            if (gameQuestionsList[this.index].status === 0) {
                questionHTML.innerHTML = gameQuestionsList[this.index].question;
            } else {
                if (this.index === gameQuestionsList.length - 1) {
                    this.index = 0;
                } else {
                    this.index++;
                }

                this.showQuestion(gameQuestionsList);
            }
        } else {
            this.showScore();
        }
    }

    checkUserAnswer() {
        this.trueAnswer = gameQuestionsList[this.index].answer;

        if (this.currentAnswer.toLowerCase() === this.trueAnswer) {
            gameQuestionsList[this.index].status = 1;
            this.correct++;
            this.colorizeLetters("green");

            if (this.index === gameQuestionsList.length - 1) {
                this.index = 0;
            } else {
                this.index++;
            }

            this.showQuestion();
        } else {
            gameQuestionsList[this.index].status = 2;
            this.incorrect++;
            this.colorizeLetters("red");

            if (this.index === gameQuestionsList.length - 1) {
                this.index = 0;
            } else {
                this.index++;
            }

            this.showQuestion();
        }
    }

    startCountDown(seconds) {
        countDownEl.innerHTML = `${seconds}`;
    }

    showScore() {
        correctAnswer.innerHTML = `Respuestas correctas: ${this.correct}`;
        incorrectAnswer.innerHTML = `Respuestas incorrectas: ${this.incorrect}`;

        panelScreen.classList.add("hidden");
        panelScore.classList.remove("hidden");
    }
}

const checkBtn = document.querySelector("#check");
const pasapalabraBtn = document.querySelector("#save-word");
const startBtn = document.querySelector("#start");
const panelScreen = document.querySelector("#panel");
const panelScore = document.querySelector("#score-panel");
const correctAnswer = document.querySelector("#correct-answer");
const incorrectAnswer = document.querySelector("#incorrect-answer");
let questionHTML = document.querySelector("#question");
let inputTextIsUserAnswer = document.querySelector("#answer");
let gameQuestionsList = [];

const countDownEl = document.querySelector("#countdown");

let seconds = 150;

const pasapalabraGame = new Pasapalabra(
    inputTextIsUserAnswer,
    gameQuestionsList
);

gameQuestionsList = pasapalabraGame.createGameQuestionsList();

pasapalabraGame.showQuestion(gameQuestionsList);

checkBtn.addEventListener("click", (e) => {
    e.preventDefault();

    pasapalabraGame.showQuestion(gameQuestionsList);

    if (inputTextIsUserAnswer.value === "") return;
    pasapalabraGame.saveAnswer(inputTextIsUserAnswer.value);
    inputTextIsUserAnswer.value = "";

    pasapalabraGame.checkUserAnswer();
});

pasapalabraBtn.addEventListener("click", (e) => {
    e.preventDefault();
    pasapalabraGame.showNextQuestion();
});

startBtn.addEventListener("click", (e) => {
    e.preventDefault();

    startBtn.classList.add("hidden");
    panelScreen.classList.remove("hidden");

    setInterval(() => {
        if (seconds !== 0) {
            seconds--;
            pasapalabraGame.startCountDown(seconds);
        } else {
            pasapalabraGame.showScore();
        }
    }, 1000);
});
